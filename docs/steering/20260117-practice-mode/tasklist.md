# Practice ãƒ¢ãƒ¼ãƒ‰ï¼ˆç™ºè©±ç·´ç¿’æ©Ÿèƒ½ï¼‰ - ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨ˆç”»ç¢ºå®š
**ä½œæˆæ—¥**: 2026-01-17
**è¨­è¨ˆ**: [design.md](./design.md)
**æ©Ÿèƒ½ã‚¿ã‚¤ãƒ—**: C. ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆDB + API + UIï¼‰

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºç›¤æ•´å‚™

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 1.1 | DBã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ï¼ˆPracticeLog, Phrase, Userï¼‰ | `prisma/schema.prisma` | [ ] |
| 1.2 | ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ | - | [ ] |
| 1.3 | å‹å®šç¾©è¿½åŠ ï¼ˆPracticeé–¢é€£ï¼‰ | `src/types/phrase.ts`, `src/types/userSettings.ts` | [ ] |

### Phase 2: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…ï¼ˆTDDï¼‰

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 2.1 | ğŸ”´ ä¸€è‡´åº¦åˆ¤å®šãƒ†ã‚¹ãƒˆä½œæˆ | `src/utils/similarity.test.ts` | [ ] |
| 2.2 | ğŸŸ¢ ä¸€è‡´åº¦åˆ¤å®šå®Ÿè£… | `src/utils/similarity.ts` | [ ] |
| 2.3 | ğŸ”µ ä¸€è‡´åº¦åˆ¤å®šãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | - | [ ] |
| 2.4 | ğŸ”´ å·®åˆ†è¨ˆç®—ãƒ†ã‚¹ãƒˆä½œæˆ | `src/utils/diff.test.ts` | [ ] |
| 2.5 | ğŸŸ¢ å·®åˆ†è¨ˆç®—å®Ÿè£… | `src/utils/diff.ts` | [ ] |
| 2.6 | ğŸ”µ å·®åˆ†è¨ˆç®—ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | - | [ ] |

### Phase 3: APIå®Ÿè£…ï¼ˆTDDï¼‰

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 3.1 | ğŸ”´ ç·´ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—APIãƒ†ã‚¹ãƒˆ | `src/app/api/phrase/practice/route.test.ts` | [ ] |
| 3.2 | ğŸŸ¢ ç·´ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—APIå®Ÿè£… | `src/app/api/phrase/practice/route.ts` | [ ] |
| 3.3 | ğŸ”µ ç·´ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—APIãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | - | [ ] |
| 3.4 | ğŸ”´ å›ç­”é€ä¿¡APIãƒ†ã‚¹ãƒˆ | `src/app/api/phrase/practice/answer/route.test.ts` | [ ] |
| 3.5 | ğŸŸ¢ å›ç­”é€ä¿¡APIå®Ÿè£… | `src/app/api/phrase/practice/answer/route.ts` | [ ] |
| 3.6 | ğŸ”µ å›ç­”é€ä¿¡APIãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | - | [ ] |
| 3.7 | ğŸ”´ Practiceãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ | `src/app/api/ranking/practice/route.test.ts` | [ ] |
| 3.8 | ğŸŸ¢ Practiceãƒ©ãƒ³ã‚­ãƒ³ã‚°å®Ÿè£… | `src/app/api/ranking/practice/route.ts` | [ ] |
| 3.9 | ğŸ”µ Practiceãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | - | [ ] |

### Phase 4: ãƒ•ãƒƒã‚¯å®Ÿè£…

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 4.1 | éŸ³å£°èªè­˜ãƒ•ãƒƒã‚¯å®Ÿè£… | `src/hooks/practice/useSpeechRecognition.ts` | [ ] |
| 4.2 | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ•ãƒƒã‚¯å®Ÿè£… | `src/hooks/practice/usePracticeSession.ts` | [ ] |
| 4.3 | å›ç­”é€ä¿¡ãƒ•ãƒƒã‚¯å®Ÿè£… | `src/hooks/practice/usePracticeAnswer.ts` | [ ] |

### Phase 5: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 5.1 | å·®åˆ†ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | `src/components/practice/DiffHighlight.tsx` | [ ] |
| 5.2 | ãƒ¢ãƒ¼ãƒ‰é¸æŠãƒ¢ãƒ¼ãƒ€ãƒ« | `src/components/practice/PracticeModeModal.tsx` | [ ] |
| 5.3 | çµæœè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | `src/components/practice/PracticeResult.tsx` | [ ] |
| 5.4 | ãƒ¡ã‚¤ãƒ³ç·´ç¿’ç”»é¢ | `src/components/practice/PracticePractice.tsx` | [ ] |
| 5.5 | Practiceãƒšãƒ¼ã‚¸ | `src/app/[locale]/phrase/practice/page.tsx` | [ ] |

### Phase 6: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 6.1 | ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«Practiceè¿½åŠ  | `src/components/navigation/PhraseTabNavigation.tsx` | [ ] |
| 6.2 | ãƒ•ãƒ¬ãƒ¼ã‚ºä¸€è¦§ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ | `src/components/phrase/PhraseItem.tsx` | [ ] |
| 6.3 | ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã«Practiceã‚¿ãƒ–è¿½åŠ  | `src/app/[locale]/ranking/page.tsx` | [ ] |

### Phase 7: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 7.1 | è¨­å®šAPIä¿®æ­£ï¼ˆphraseMode, practiceIncludeExistingï¼‰ | `src/app/api/user/settings/route.ts` | [ ] |
| 7.2 | è¨­å®šãƒ•ãƒƒã‚¯ä¿®æ­£ | `src/hooks/data/useUserSettings.ts` | [ ] |
| 7.3 | è¨­å®šãƒ•ã‚©ãƒ¼ãƒ UIè¿½åŠ  | `src/components/settings/UserSettingsForm.tsx` | [ ] |

### Phase 8: ç¿»è¨³ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 8.1 | ç¿»è¨³ã‚­ãƒ¼è¿½åŠ ï¼ˆ13è¨€èªï¼‰ | `public/locales/*/app.json` | [ ] |
| 8.2 | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | `docs/backend/api-routes.md` ç­‰ | [ ] |

### Phase 9: æ¤œè¨¼

| # | ã‚¿ã‚¹ã‚¯ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|--------|-------------|-----------|
| 9.1 | ãƒ“ãƒ«ãƒ‰ç¢ºèª | - | [ ] |
| 9.2 | ãƒ†ã‚¹ãƒˆãƒ»Lintç¢ºèª | - | [ ] |
| 9.3 | çµ±åˆå‹•ä½œç¢ºèª | - | [ ] |
| 9.4 | ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ç¢ºèªï¼ˆéŸ³å£°èªè­˜ï¼‰ | - | [ ] |

---

## TDDã‚µã‚¤ã‚¯ãƒ«ã®å‡¡ä¾‹

- ğŸ”´ Red: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆï¼‰
- ğŸŸ¢ Green: æœ€å°å®Ÿè£…ï¼ˆãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ï¼‰
- ğŸ”µ Refactor: ã‚³ãƒ¼ãƒ‰æ”¹å–„ï¼ˆãƒ†ã‚¹ãƒˆç¶­æŒï¼‰

---

## æ³¨æ„äº‹é …

- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œå‰ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªå¿…é ˆ
- è¤‡æ•°DBæ“ä½œã¯ `prisma.$transaction()` ã‚’ä½¿ç”¨
- ä¸€è‡´åº¦åˆ¤å®šã¯ã‚µãƒ¼ãƒãƒ¼å´ã§å®Ÿè¡Œï¼ˆæ”¹ã–ã‚“é˜²æ­¢ï¼‰
- éŸ³å£°èªè­˜ã¯Web Speech APIï¼ˆãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§æ³¨æ„ï¼‰

---

## å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«

- æ—¢å­˜Speakãƒ¢ãƒ¼ãƒ‰: `src/components/speak/`, `src/hooks/speak/`
- æ—¢å­˜Quizãƒ¢ãƒ¼ãƒ‰: `src/components/quiz/`, `src/hooks/quiz/`
- æ—¢å­˜ãƒ©ãƒ³ã‚­ãƒ³ã‚°: `src/app/[locale]/ranking/`
- æ—¢å­˜è¨­å®š: `src/components/settings/`

---

## TodoWriteç”¨ãƒ‡ãƒ¼ã‚¿

```json
[
  {"content": "Phase 1: DBã‚¹ã‚­ãƒ¼ãƒæ›´æ–°ãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", "activeForm": "DBã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ä¸­", "status": "pending"},
  {"content": "Phase 1: å‹å®šç¾©è¿½åŠ ", "activeForm": "å‹å®šç¾©ã‚’è¿½åŠ ä¸­", "status": "pending"},
  {"content": "Phase 2: ğŸ”´ğŸŸ¢ğŸ”µ ä¸€è‡´åº¦åˆ¤å®šï¼ˆTDDï¼‰", "activeForm": "ä¸€è‡´åº¦åˆ¤å®šã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 2: ğŸ”´ğŸŸ¢ğŸ”µ å·®åˆ†è¨ˆç®—ï¼ˆTDDï¼‰", "activeForm": "å·®åˆ†è¨ˆç®—ã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 3: ğŸ”´ğŸŸ¢ğŸ”µ ç·´ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—APIï¼ˆTDDï¼‰", "activeForm": "ç·´ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—APIã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 3: ğŸ”´ğŸŸ¢ğŸ”µ å›ç­”é€ä¿¡APIï¼ˆTDDï¼‰", "activeForm": "å›ç­”é€ä¿¡APIã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 3: ğŸ”´ğŸŸ¢ğŸ”µ Practiceãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTDDï¼‰", "activeForm": "Practiceãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 4: éŸ³å£°èªè­˜ãƒ•ãƒƒã‚¯å®Ÿè£…", "activeForm": "éŸ³å£°èªè­˜ãƒ•ãƒƒã‚¯ã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 4: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ•ãƒƒã‚¯å®Ÿè£…", "activeForm": "ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ•ãƒƒã‚¯ã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 4: å›ç­”é€ä¿¡ãƒ•ãƒƒã‚¯å®Ÿè£…", "activeForm": "å›ç­”é€ä¿¡ãƒ•ãƒƒã‚¯ã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 5: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…", "activeForm": "UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 6: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£", "activeForm": "æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¿®æ­£ä¸­", "status": "pending"},
  {"content": "Phase 7: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š", "activeForm": "ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’å®Ÿè£…ä¸­", "status": "pending"},
  {"content": "Phase 8: ç¿»è¨³ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ", "activeForm": "ç¿»è¨³ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ä¸­", "status": "pending"},
  {"content": "Phase 9: æ¤œè¨¼ï¼ˆãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»å‹•ä½œç¢ºèªï¼‰", "activeForm": "æ¤œè¨¼ä¸­", "status": "pending"}
]
```
